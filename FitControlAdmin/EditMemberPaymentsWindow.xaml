<Window x:Class="FitControlAdmin.EditMemberPaymentsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:converters="clr-namespace:FitControlAdmin.Converters"
        Title="Gestão de Pagamentos - {Binding MemberName}"
        Height="600" Width="900"
        WindowStartupLocation="CenterOwner"
        Background="#313443"
        ResizeMode="NoResize">

    <Window.Resources>
        <converters:EnumNameConverter x:Key="EnumNameConverter"/>
    </Window.Resources>

    <Grid Margin="25">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TextBlock x:Name="TitleText"
                   Grid.Row="0"
                   Text="Gestão de Pagamentos"
                   FontSize="22"
                   FontWeight="Bold"
                   Foreground="#e6e6e8"
                   Margin="0,0,0,25"/>

        <StackPanel Grid.Row="1" Margin="0,0,0,20">
            <TextBlock x:Name="MemberInfoText"
                       Foreground="#95a5a6"
                       FontSize="14"
                       Margin="0,0,0,10"/>
        </StackPanel>

        <Border Grid.Row="2"
                Background="#272936"
                CornerRadius="10"
                Padding="20">
            <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                <DataGrid x:Name="PaymentsDataGrid"
                          AutoGenerateColumns="False"
                          IsReadOnly="True"
                          SelectionMode="Single"
                          GridLinesVisibility="All"
                          HeadersVisibility="Column">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Subscrição" Binding="{Binding NomeSubscricao}" Width="150"/>
                        <DataGridTextColumn Header="Mês referente" Binding="{Binding MesReferente, StringFormat=MM/yyyy}" Width="100"/>
                        <DataGridTextColumn Header="Valor" Binding="{Binding ValorPago, StringFormat=C}" Width="100"/>
                        <DataGridTextColumn Header="Método de pagamento" Binding="{Binding MetodoPagamento}" Width="120"/>
                        <DataGridTextColumn Header="Estado" Binding="{Binding EstadoPagamento}" Width="100"/>
                        <DataGridTextColumn Header="Data de registo" Binding="{Binding DataRegisto, StringFormat=dd/MM/yyyy HH:mm}" Width="140"/>
                        <DataGridTextColumn Header="Data de pagamento" Binding="{Binding DataPagamento, StringFormat=dd/MM/yyyy HH:mm}" Width="140"/>
                        <DataGridTemplateColumn Header="Ações" Width="200">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal">
                                        <Button Content="Editar"
                                                Click="EditPaymentButton_Click"
                                                Tag="{Binding IdPagamento}"
                                                Padding="8,4"
                                                Margin="2"
                                                Background="#02acc3"
                                                Foreground="White"
                                                BorderThickness="0"
                                                Cursor="Hand"
                                                FontSize="12">
                                            <Button.Style>
                                                <Style TargetType="Button">
                                                    <Setter Property="Background" Value="#02acc3"/>
                                                    <Style.Triggers>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter Property="Background" Value="#0299b0"/>
                                                        </Trigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Button.Style>
                                        </Button>
                                        <Button Content="Marcar como pago"
                                                Click="MarkPaymentAsPaidButton_Click"
                                                Tag="{Binding IdPagamento}"
                                                Padding="8,4"
                                                Margin="2"
                                                Background="#27AE60"
                                                Foreground="White"
                                                BorderThickness="0"
                                                Cursor="Hand"
                                                FontSize="12">
                                            <Button.Style>
                                                <Style TargetType="Button">
                                                    <Setter Property="Visibility" Value="Collapsed"/>
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding EstadoPagamento}" Value="Pendente">
                                                            <Setter Property="Visibility" Value="Visible"/>
                                                        </DataTrigger>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter Property="Background" Value="#229954"/>
                                                        </Trigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Button.Style>
                                        </Button>
                                    </StackPanel>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>
            </ScrollViewer>
        </Border>

        <StackPanel Grid.Row="3"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    Margin="0,25,0,0">
            <Button Content="Criar Pagamento"
                    Click="CreatePaymentButton_Click"
                    Padding="20,10"
                    Margin="0,0,10,0"
                    Width="150"
                    Background="#27AE60"
                    Foreground="White"
                    BorderThickness="0"
                    Cursor="Hand"
                    FontSize="14"
                    FontWeight="SemiBold">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Background" Value="#27AE60"/>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#229954"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>
            <Button Content="Fechar"
                    Click="CloseButton_Click"
                    Padding="20,10"
                    Width="120"
                    Background="#34495E"
                    Foreground="White"
                    BorderThickness="0"
                    Cursor="Hand"
                    FontSize="14">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Background" Value="#34495E"/>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#2c3e50"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>
        </StackPanel>
    </Grid>
</Window>
